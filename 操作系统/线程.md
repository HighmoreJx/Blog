## 前言

对操作系统的理解很有限, 所以这篇文章先占个位置, 只是罗列一些简单的概念.  

## 简单印象

[<<我是一个进程>>](https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&mid=2665513283&idx=1&sn=4e5ea6d64a7687d1ddee20fe7de947c1&scene=21#wechat_redirect)[<<我是一个线程(修订版)>>](https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&mid=416915373&idx=1&sn=f80a13b099237534a3ef777d511d831a&scene=21#wechat_redirect)简单向我们展示了一下线程的运作.可以先看看,我们接下来还是以问题的方式来递进的了解一下线程.  

* 我们为什么需要线程?  
* 线程相较于进程有什么区别?  
* 线程池是什么?  

### 为什么需要线程

> 进程是具有独立功能的程序关于某个数据集合上的一次运行活动,是系统进行资源分配和调度（若不支持线程机制,进程的系统调度的单位.否则,线程是系统调度的单位）的独立单位.

如果没有线程, 那进程就是系统调度的单位, 再回到如今我们使用的各种应用.比如日常使用的听歌APP,我们可以在听歌过程中切换音乐,还可以边听边下载等等.如果只是单进程的话是无法应对上述使用场景的.这个时候就可能要多进程协作来实现这种同时做很多事情的效果.  

系统又是以进程为单位来分配资源的,多进程协作的话就牵涉到一个通信问题,而且CPU的轮询又带入了一个进程切换成本的问题.  

所以后续又在进程的基础上诞生了线程这一概念,一个进程可由很多线程组成,线程间共享进程的所有资源,每个线程有自己的堆栈和局部变量.线程是程序执行时的最小单位，它是进程的一个执行流，是CPU调度和分派的基本单位.  

> 操作系统的设计，因此可以归结为三点：  
>（1）以多进程形式，允许多个任务同时运行；  
>（2）以多线程形式，允许单个任务分成不同的部分运行；  
>（3）提供协调机制，一方面防止进程之间和线程之间产生冲突，另一方面允许进程之间和线程之间共享资源。

### 线程进程区别

> * 进程是资源分配的最小单位，线程是程序执行的最小单位。  
> * 进程有自己的独立地址空间，每启动一个进程，系统就会为它分配地址空间，建立数据表来维护代码段、堆栈段和数据段，这种操作非常昂贵。而线程是共享进程中的数据的，使用相同的地址空间，因此CPU切换一个线程的花费远比进程要小很多，同时创建一个线程的开销也比进程要小很多。  
> * 线程之间的通信更方便，同一进程下的线程共享全局变量、静态变量等数据，而进程之间的通信需要以通信的方式（IPC)进行。不过如何处理好同步与互斥是编写多线程程序的难点。  
> * 但是多进程程序更健壮，多线程程序只要有一个线程死掉，整个进程也死掉了，而一个进程死掉并不会对另外一个进程造成影响，因为进程有自己独立的地址空间。  

[线程和进程的区别是什么？](https://www.zhihu.com/question/25532384)  
[多线程有什么用？](https://www.zhihu.com/question/19901763)  
这两篇帖子的高赞回答也比较有意思,一篇把两者区别抽象成时间段描述,只是粒度大小不同;一篇在如今服务端编程+IO模型基础+操作系统的基础上分析了下多进程及多线程应用.  

### 池化技术

> 池化技术，简单来说就是提前保存大量的资源，以备不时之需  

以线程池为例,根据一定策略(比如CPU数量等)创建一定的线程资源存储起来,需要的时候直接从线程池里面分配线程进行处理.  

> 线程池主要用于需要大量的线程来完成任务，且完成任务的时间较短。比如web服务器完成网页请求这样的任务，使用线程池技术是非常合适的。因为单个任务小，且任务数量巨大，对于长时间的任务，线程池没明显的优势，比如Telnet链接请求，Telnet会话时间比线程的创建时间大很多.  


## 引用

[我是一个线程(修订版)](https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&mid=416915373&idx=1&sn=f80a13b099237534a3ef777d511d831a&scene=21#wechat_redirect)  

[我是一个进程](https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&mid=2665513283&idx=1&sn=4e5ea6d64a7687d1ddee20fe7de947c1&scene=21#wechat_redirect)  

[多线程有什么用？](https://www.zhihu.com/question/19901763)  

[线程和进程、程序、应用程序之间的关系](https://www.cnblogs.com/lisuyun/articles/3293580.html)    

[Linux 线程的前世今生](https://juejin.im/entry/56daf0047664bf0052f0bdbd)  

[线程和进程的区别是什么？](https://www.zhihu.com/question/25532384)  

[进程与线程的一个简单解释](http://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html)  

[一道面试题：说说进程和线程的区别](https://foofish.net/thread-and-process.html)  


[池化技术](http://blog.leanote.com/post/lotu/%E6%B1%A0%E5%8C%96%E6%8A%80%E6%9C%AF)  

[内存池、进程池和线程池](http://blog.leanote.com/post/lotu/%E5%86%85%E5%AD%98%E6%B1%A0)
